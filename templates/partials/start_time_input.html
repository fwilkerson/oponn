<div class="form-group" id="scheduled-start-wrapper">
    <label for="scheduled_start_time_picker"
        >commencement_timestamp (MM/DD/YYYY HH:MM)
    </label>
    <input
        type="hidden"
        id="scheduled_start_time"
        name="scheduled_start_time"
        value="{{ scheduled_start_time or '' }}"
    />
    <input
        type="text"
        id="scheduled_start_time_picker"
        class="{% if field_errors and field_errors.scheduled_start_time %}invalid{% endif %}"
        placeholder="01/24/2026 15:00"
        pattern="\d{1,2}/\d{1,2}/\d{4} \d{1,2}:\d{2}"
        title="Please enter a date in MM/DD/YYYY HH:MM format"
        oninput="const d = new Date(this.value.replace(/-/g, '/')); document.getElementById('scheduled_start_time').value = (this.value && !isNaN(d.getTime())) ? d.toISOString() : '';"
    />
    <script>
        (() => {
            const hidden = document.getElementById('scheduled_start_time');
            const picker = document.getElementById('scheduled_start_time_picker');
            if (hidden && hidden.value && picker) {
                const d = new Date(hidden.value);
                if (!isNaN(d.getTime())) {
                    const pad = (n) => n.toString().padStart(2, '0');
                    picker.value = `${pad(d.getMonth() + 1)}/${pad(d.getDate())}/${d.getFullYear()} ${pad(d.getHours())}:${pad(d.getMinutes())}`;
                }
            }
        })();
    </script>
    {% if field_errors and field_errors.scheduled_start_time %}
        <div class="field-error-msg">{{ field_errors.scheduled_start_time }}</div>
    {% endif %}
    <div class="muted-small">local time will be used for commencement</div>
</div>
